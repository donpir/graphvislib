<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Similarity Graph Viz</title>

	<link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../../stylesheets/print.css" media="print">
	
    <script type="text/javascript" src="d3.min.js"></script>
    <script type="text/javascript" src="GeomMathUtils.js"></script>

    <!-- Behaviours importing -->
    <script type="text/javascript" src="behaviours/BaseGraphBehaviour.js"></script>
    <script type="text/javascript" src="behaviours/SingleEdgeGraphBehaviour.js"></script>
    <script type="text/javascript" src="behaviours/DoubleEdgeGraphBehaviour.js"></script>
    <script type="text/javascript" src="behaviours/HermiteGraphBehaviour.js"></script>

    <script type="text/javascript" src="SimilarityGraphViz.js"></script>

    <style>

        .node {
            stroke: #fff;
            stroke-width: 1.5px;
        }

        .link, .linkup, .linkdown {
            stroke: #999;
            stroke-opacity: .6;
            stroke-width: 2px;
        }

        .linkMarker, .linkMarkerUp, .linkMarkerDown {
            stroke: red;
            stroke-width: 3px;
        }

        .linkMarkerDown {
            stroke: blue;
            stroke-width: 3px;
        }

        .nodeTitle {
            font-size: 8px;
        }

        .arrow {
            fill: #999;
            fill-opacity: 1;
        }

        section.viz {
            width: 720px;
            height: 500px;
            background: #CFD8DC;
            margin: auto;
            padding: 1px;
        }
		
		section > p {
			width: 720px;
		}
		
        div.left {
            width: 100%;
            height: 500px;
            background: #FAFAFA;
            float: left;
        }
        div.right {
            margin-left: 25px;
            height: 500px;
            background: #B3E5FC;
        }

    </style>
</head>
<body>

    <div id="container">
      <div class="inner">

        <header>
          <h1 style="text-align: center;">Plagiarism Visualisation</h1>
		  <br>
		  <p style="font-style: italic; font-size: 1.4em; text-align: center;"><i>
			<a href="http://www.unisa.it" target="_blank">Università degli Studi di Salerno</a>, Fisciano, Italy</i></p>
		  <p style="font-style: italic; font-size: .8em; text-align: center;">
				R. De Prisco, N. Lettieri, D. Malandrino, 
				<a href="https://scholar.google.it/citations?user=VfQ1pGkAAAAJ&hl=it" target="_blank">D. Pirozzi</a>, 
				G. Zaccagnino, R. Zaccagnino
		  </p>
		  <hr>
          <p>
				The aim of this page is to present three visualisations to represent plagiarism among songs.
				
				Our aim is to search for an intuitive visualisation to easily identify plagiarism with a dataset of artifacts
				(e.g., songs, text, etc.).

				The following are three visualisations, which use specially prepared dataset of songs.
				They have been test with end-users.
			</p>
			<p style="font-size: .8em;">
			Note: This page is compatible with the following browsers: Chrome (version >= 49), Firefox (version >= 44), Safari and Opera (version >= 36).
			</p>
			<hr>
        </header>
		
        <section id="main_content">
		
			<h2>Visualisation (Viz2)</h2>
			<section class="viz">
				<div id="placeholderViz2" class="left"> </div>
			</section>
			<p style="text-align: justify; text-justify: inter-word;">This visualisation represents every song is represented as a circle, whose circumference is proportional to the song’s length here defined as the number of notes within the song. The edge connecting two circles identifies common sequences of notes (n-grams). If two songs represent a plagiarism case, then: (a) common fragments on the edge will be marked with a red color; (b) nodes (circles) will be colored with the same color; (c) an arrow will be added from the circle of who is guilty of plagiarism to the circle of the copied song. </p>

			<h2>Visualisation (Viz 3)</h2>
			<section class="viz">
				<div id="placeholderViz3" class="left"> </div>
			</section>
			<p style="text-align: justify; text-justify: inter-word;">This visualisation represents every song is represented as a circle, whose circumference is proportional to the song’s length here defined as the number of notes within the song. We use two edges (one per song) for connecting two circles whether there are common sequences of notes (n-grams). If two songs represent a plagiarism case, then: (a) common fragments on the edge will be marked with the same color; (b) nodes (circles) will be colored with the same color; (c) an arrow will be added from the circle of who is guilty of plagiarism to the circle of the copied song.</p>

			<h2>Visualisation (Viz 1)</h2>
			<section class="viz">
				<div id="placeholderViz1" class="left"> </div>
			</section>
			<p style="text-align: justify; text-justify: inter-word;">This visualisation represents  every song is represented as a rectangle, whose height is proportional to the song’s length here defined as the number of notes within the song. The line connecting two rectangles identifies common sequences of notes (n-grams). The extremities of the lines identify, respectively, the points of the song in which the common n-grams are placed. The line thickness is proportional to the dimension of n-grams. If two songs represent a plagiarism case, the same color will be used for the corresponding rectangles.
			</p>
			
			<h2>Evaluation study</h2>
			
			<p>
			The three visualisations have been evaluated with 36 participants who performed tasks in random order.
			The questionnaire is available <a target="_blank" href="Questionnaire.pdf">here</a>. 
			The tasks performed are available <a target="_blank" href="Tasks.pdf">here</a> in paper format. These tasks during the evaluation phase have been presented in random order using the open source framework available <a target="_blank" href="https://github.com/donpir/viztestrunner">VizTestRunner</a>.
			</p>
		</section>
		
	</div>
    </div>

    <script type="text/javascript">
        var httpGetAsync = function(theUrl, callback) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (xhttp.readyState == 4 && xhttp.status == 200)
                    callback(xhttp.responseText);
            };
            xhttp.open("GET", theUrl, true); // true for asynchronous
            xhttp.send(null);
        };//EndFunction.

        httpGetAsync("songs.json", loadGraphViz1);

        function loadGraphViz1(sGraphModel) {
            var graphModel = JSON.parse(sGraphModel);
            //START CONVERT
            //Convert the links in the new format.
            graphModel.links = graphModel.links.filter(function(link) {
                return (link.type == 'marker');
            });

            var nlinks = [];
            graphModel.links.forEach(function(link) {
                var bFilter = (link.node == link.source);
                if (!bFilter) return;

                graphModel.links.forEach(function(_link){
                var bFilter = (_link.source == link.source && _link.node == link.target && _link.group == link.group);
                if (!bFilter) return;

                var newLink = {};
                newLink.source = link.source;
                newLink.target = link.target;
                newLink.sourceStart = link.start;
                newLink.length = link.length;
                newLink.targetStart = _link.start;
                newLink.group = link.group;

                nlinks.push(newLink);
                });
            });

             graphModel.links = nlinks;
            //END CONVERT

            var svg = d3.select("#placeholderViz1").append("svg").attr("width", 720).attr("height", 500);
            var myGraph = SimilarityGraphViz(new HermiteGraphBehaviour());

            myGraph(graphModel, svg);
        }//EndFunction.

        ////////////////////////////////////////////////
        /// VISUALISATION 2
        ///

        httpGetAsync("songs.json", loadGraphViz2);

        function loadGraphViz2(sGraphModel) {
            var graphModel = JSON.parse(sGraphModel);
            var svg = d3.select("#placeholderViz2").append("svg").attr("width", 720).attr("height", 500);
            var myGraph = SimilarityGraphViz(new SingleEdgeGraphBehaviour());
            myGraph(graphModel, svg);
        };//EndFunction.

        ////////////////////////////////////////////////
        /// VISUALISATION 3
        ///

        httpGetAsync("songs.json", loadGraphViz3);

        function loadGraphViz3(sGraphModel) {
            var graphModel = JSON.parse(sGraphModel);
            var svg = d3.select("#placeholderViz3").append("svg").attr("width", 720).attr("height", 500);
            var myGraph = SimilarityGraphViz(new DoubleEdgeGraphBehaviour());
            myGraph(graphModel, svg);
        };//EndFunction.

    </script>

</body>
</html>